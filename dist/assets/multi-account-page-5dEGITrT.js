import{r as x,j as e}from"./ui-vendor-BBvy5_e4.js";import{C as i,d as c}from"./card-wt_nJGez.js";import{B as l,C as p,D as N,T as F,R as g,x as f,y as v,z as y,E as b,F as S,S as C,Y as w,Z as U}from"./index-JZK0iDKY.js";import{B as A}from"./badge-DkYv5gj6.js";import{P as B}from"./progress-CqExqoQx.js";import{n as d}from"./notifications-CEhhHAa1.js";import{P as L}from"./plus-Cr2CxNpX.js";import{C as D}from"./circle-check-2r_On2bL.js";import{S as P}from"./server-jQuAE47H.js";import{C as z}from"./circle-x-isR9nabO.js";import{E as V}from"./ellipsis-vertical-uWlWUiMr.js";import{E as Y}from"./external-link-DDWfovnJ.js";import{T as G}from"./trash-2-BHZN_fzT.js";import"./charts-BvZVcBDs.js";const H=[{id:"acc-1",name:"Production",accountId:"123456789012",region:"us-east-1",status:"connected",lastSync:"5 minutes ago",resourceCount:156,monthlyCost:2450,hygieneScore:78,isPrimary:!0},{id:"acc-2",name:"Staging",accountId:"234567890123",region:"us-west-2",status:"connected",lastSync:"12 minutes ago",resourceCount:89,monthlyCost:890,hygieneScore:85,isPrimary:!1},{id:"acc-3",name:"Development",accountId:"345678901234",region:"eu-west-1",status:"syncing",lastSync:"Syncing...",resourceCount:45,monthlyCost:320,hygieneScore:92,isPrimary:!1},{id:"acc-4",name:"Legacy",accountId:"456789012345",region:"ap-southeast-1",status:"error",lastSync:"Failed 2 hours ago",resourceCount:0,monthlyCost:0,hygieneScore:0,isPrimary:!1}],u={connected:{icon:D,color:"text-green-500",bg:"bg-green-500/10",label:"Connected"},syncing:{icon:g,color:"text-blue-500",bg:"bg-blue-500/10",label:"Syncing"},error:{icon:z,color:"text-red-500",bg:"bg-red-500/10",label:"Error"},disconnected:{icon:F,color:"text-amber-500",bg:"bg-amber-500/10",label:"Disconnected"}};function ie(){const[r,o]=x.useState(H),[k,m]=x.useState(!1),[n,I]=x.useState(null),[R,h]=x.useState(!1),T=r.reduce((s,t)=>s+t.monthlyCost,0),$=r.reduce((s,t)=>s+t.resourceCount,0),E=r.filter(s=>s.status==="connected").length,j=s=>{o(t=>t.map(a=>a.id===s?{...a,status:"syncing",lastSync:"Syncing..."}:a)),d.info("Syncing...","Fetching latest data from AWS"),setTimeout(()=>{o(t=>t.map(a=>a.id===s?{...a,status:"connected",lastSync:"Just now"}:a)),d.success("Sync complete","Account data has been updated")},2e3)},O=s=>{o(t=>t.filter(a=>a.id!==s)),d.success("Account removed","The AWS account has been disconnected"),h(!1)},M=s=>{o(t=>t.map(a=>({...a,isPrimary:a.id===s}))),d.success("Primary account updated","Dashboard will now show data from this account")};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"AWS Accounts"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage multiple AWS accounts from a single dashboard"})]}),e.jsxs(l,{onClick:()=>m(!0),children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Add Account"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(i,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(p,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:r.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Accounts"})]})]})})}),e.jsx(i,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500/10",children:e.jsx(D,{className:"w-5 h-5 text-green-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:E}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Connected"})]})]})})}),e.jsx(i,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(P,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:$}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Resources"})]})]})})}),e.jsx(i,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10",children:e.jsx(N,{className:"w-5 h-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",T.toLocaleString()]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Monthly Cost"})]})]})})})]}),e.jsx("div",{className:"grid gap-4",children:r.map(s=>{const t=u[s.status],a=t.icon;return e.jsx(i,{className:`hover:border-primary/50 transition-colors cursor-pointer ${s.isPrimary?"border-primary/30 bg-primary/5":""}`,onClick:()=>{I(s),h(!0)},children:e.jsx(c,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${t.bg}`,children:e.jsx(a,{className:`w-6 h-6 ${t.color} ${s.status==="syncing"?"animate-spin":""}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),s.isPrimary&&e.jsx(A,{variant:"secondary",className:"text-xs",children:"Primary"}),e.jsx(A,{variant:"outline",className:t.color,children:t.label})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-mono",children:s.accountId}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.region}),e.jsx("span",{children:"•"}),e.jsx("span",{children:s.lastSync})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:s.resourceCount}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Resources"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold",children:["$",s.monthlyCost.toLocaleString()]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Monthly"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-lg font-bold ${s.hygieneScore>=80?"text-green-500":s.hygieneScore>=60?"text-amber-500":"text-red-500"}`,children:s.hygieneScore||"-"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Score"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",onClick:W=>W.stopPropagation(),children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>j(s.id),disabled:s.status==="syncing",children:e.jsx(g,{className:`w-4 h-4 ${s.status==="syncing"?"animate-spin":""}`})}),e.jsx(l,{variant:"ghost",size:"icon",children:e.jsx(V,{className:"w-4 h-4"})})]})]})})},s.id)})}),e.jsx(f,{open:k,onOpenChange:m,children:e.jsxs(v,{children:[e.jsxs(y,{children:[e.jsx(b,{children:"Connect AWS Account"}),e.jsx(S,{children:"Add a new AWS account to monitor. You'll need to configure IAM permissions."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Account Name"}),e.jsx("input",{type:"text",placeholder:"e.g., Production",className:"w-full mt-1 px-3 py-2 border border-border rounded-lg bg-background"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"AWS Account ID"}),e.jsx("input",{type:"text",placeholder:"123456789012",className:"w-full mt-1 px-3 py-2 border border-border rounded-lg bg-background font-mono"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Region"}),e.jsxs("select",{className:"w-full mt-1 px-3 py-2 border border-border rounded-lg bg-background",children:[e.jsx("option",{value:"us-east-1",children:"US East (N. Virginia)"}),e.jsx("option",{value:"us-west-2",children:"US West (Oregon)"}),e.jsx("option",{value:"eu-west-1",children:"EU (Ireland)"}),e.jsx("option",{value:"ap-southeast-1",children:"Asia Pacific (Singapore)"})]})]}),e.jsx("div",{className:"p-4 rounded-lg bg-muted",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"w-5 h-5 text-primary mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium",children:"IAM Role Required"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"You'll need to create an IAM role with read permissions for ConsoleSensei to access your AWS resources."}),e.jsxs(l,{variant:"link",className:"h-auto p-0 mt-2",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),"View Setup Guide"]})]})]})})]}),e.jsxs(w,{children:[e.jsx(l,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(l,{onClick:()=>{m(!1),d.success("Account added","Starting initial sync...")},children:"Connect Account"})]})]})}),e.jsx(f,{open:R,onOpenChange:h,children:e.jsx(v,{className:"max-w-2xl",children:n&&e.jsxs(e.Fragment,{children:[e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${u[n.status].bg}`,children:e.jsx(p,{className:`w-5 h-5 ${u[n.status].color}`})}),e.jsxs("div",{children:[e.jsx(b,{children:n.name}),e.jsx(S,{className:"font-mono",children:n.accountId})]})]})}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Cloud Hygiene Score"}),e.jsxs("span",{className:"text-sm font-bold",children:[n.hygieneScore,"/100"]})]}),e.jsx(B,{value:n.hygieneScore,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-muted text-center",children:[e.jsx(P,{className:"w-5 h-5 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-2xl font-bold",children:n.resourceCount}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Resources"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted text-center",children:[e.jsx(N,{className:"w-5 h-5 mx-auto mb-2 text-emerald-500"}),e.jsxs("div",{className:"text-2xl font-bold",children:["$",n.monthlyCost]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Monthly Cost"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted text-center",children:[e.jsx(C,{className:"w-5 h-5 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"text-2xl font-bold",children:"3"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Issues"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{variant:"outline",className:"flex-1",onClick:()=>j(n.id),children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Sync Now"]}),e.jsxs(l,{variant:"outline",className:"flex-1",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Settings"]}),!n.isPrimary&&e.jsx(l,{variant:"outline",onClick:()=>M(n.id),children:"Set as Primary"})]})]}),e.jsx(w,{children:e.jsxs(l,{variant:"destructive",onClick:()=>O(n.id),children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Remove Account"]})})]})})})]})}export{ie as MultiAccountPage};
